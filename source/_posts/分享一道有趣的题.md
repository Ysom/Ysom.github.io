---
title: 分享一道有趣的题
categories:
 - 前端
tags:
 - JS

---

今天在群里看到朋友发了一道有趣的题

![](/images/有趣的题.jpg)

就是如何让`(a == 1 && a == 2 && a == 3) === true`这个等式成立。一开始看到这个题觉得是无稽之谈，这不扯淡吗，一个变量能同时满足几个值？但是朋友这么问还真说不定有可能，于是开始一波思考。

<!-- more -->

首先分析一下等式左边的`a==1`，`a==2`，`a==3`，相等符号`==`会判断两个变量的值是否相等，如果不相等，则会涉及到变量类型的转换，全等符号`===`则会同时判断变量的值和类型，其中一个不相等，则结果为`false`

然后我们假设等式已经成立，既然这个等式能够成立，那么变量`a`肯定不是一个普通的变量，至少**基本数据类型**满足不了这种骚操作，那么它应该是**复杂数据类型**。

那我们接着假定是对象，那么对象跟基本数据类型对比的时候，会有我们上面说的涉及到类型转换，对象会先转换成基本数据类型，这里就会触发原型上`toString()`方法，如下：

![触发toString](/images/触发toString.png)

我们给`a`重写覆盖了`toString`方法，以方便我们调试，可以看到，对象在判断转换过程中，会触发`toString`方法。那么我们就可以根据这个特性，对`a`进行一波骚操作：

```javascript
var a = {
	i: 1,
    toString: function() {
        return this.i++
    }
}
```

运行一下：

![](/images/等式成立.png)

可以看到，**等式成立！！！**这说明确实可以存在这种情况的，不过现实中不建议这样重写去改变原本默认行为，可能会导致出现不可预料的错误。但是不可否认，这种骚操作的题，一定程度上可以反馈出我们对JS基础、还有一些底层操作的理解。学习路上，真的是任重而道远啊~

